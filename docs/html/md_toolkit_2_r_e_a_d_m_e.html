<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FoPra Beluga Challenge - Reinforcement Learning Solution: Beluga Competition Toolkit</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">FoPra Beluga Challenge - Reinforcement Learning Solution<span id="projectnumber">&#160;v1.0</span>
   </div>
   <div id="projectbrief">Deep Reinforcement Learning solution for the Beluga Challenge shipping container optimization problem using PPO and MCTS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_toolkit_2_r_e_a_d_m_e.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Beluga Competition Toolkit</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md40"></a></p>
<p>The competition toolkit is a set of tools which help generate and simulate problems in different formalisms (PDDL, RL, pure json, etc.). The scripts also serve as examples on how to use the competition API for your own scripts. The following list provides a high level view of the provided scripts, which are detailed in the subsequent sections of the Readme file:</p>
<ul>
<li>Problem generation: the <code><a class="el" href="generate__instance_8py.html">generate_instance.py</a></code> script allows a user to generate a JSON file representing a specific Beluga problem instance based on configuration variables passed to the script as arguments ;</li>
<li>PDDL encoding: the JSON files generated with the previous script can be then passed to the <code><a class="el" href="json2_p_d_d_l_8py.html">json2PDDL.py</a></code> (resp. <code><a class="el" href="encode__instances_8py.html">encode_instances.py</a></code>) script to encode one (resp. multiple) PDDL instances, in either classical or numeric PDDL flavors ;</li>
<li>Scikit-decide domains: once PDDL files have been generated with the previous script, they can be passed to scikit-decide domains, where some of them include noise action effects for probabilistic reasoning (see details in the linked section) ; those domains can be used to call grounded search solvers (e.g. A* in deterministic settings, LAO* or LRTDP in probabilistic settings) or simulation-based solvers (e.g. MCTS, RL), as exemplified in the <code><a class="el" href="generate__simulate__test_8py.html">generate_simulate_test.py</a></code> script ;</li>
<li>Gymnasium environments: the previous scikit-decide domains can also be automatically casted to Gymnasium environments by specializing the <code>BelugaGymCompatibleDomain</code> class whose aim is to define tensor-based observation and action spaces for use with deep reinforcement learning algorithms; while we provide a simple observation and space encodings in an example specialized class in the <code><a class="el" href="generate__solve__rllib__test_8py.html">generate_solve_rllib_test.py</a></code> script, we strongly advise our RL friends to implement their own specialized class for better learning and generalization capabilities ;</li>
<li>Evaluator: we finally provide the <code><a class="el" href="evaluate__instance_8py.html">evaluate_instance.py</a></code> script where users can evaluate their solutions by using the same protocol as the one employed by the official competition evaluation and a similar API (though not implemented via a web service, which will instead be required for the final submission)</li>
</ul>
<p>In this file you will also find information about the uncertainty model used in the probabilistic challenge and on the distribution that was used to obtain all official benchmarks for scalability challenges in the competition.</p>
<h1><a class="anchor" id="autotoc_md41"></a>
Problem Generator</h1>
<p>The problem generator generates a random Beluga instance as a JSON file.</p>
<p>With the script</p>
<div class="fragment"><div class="line">generate_instance.py [-h] [-s SEED] [-or OCCUPANCY_RATE_RACKS] [-t JIG_T_DIST] [-f NUM_FLIGHTS] [-us {rack_space_general,outgoing_flight_not_sat,schedule_clashes}] [-v] [-o OUT] [-on OUT_NAME] [-pp] [-pm {arrivals,ppddl}] [-pw PROBABILISTIC_WINDOW]</div>
</div><!-- fragment --><p>you can generate one instance based on a default configuration which allows to specify a number of parameters.</p>
<p>For a list of possible parameters and descriptions of them call</p>
<div class="fragment"><div class="line">generate_instance.py -h</div>
</div><!-- fragment --><p>results it the following description:</p>
<ul>
<li><code>-h</code>, <code>--help</code> : show this help message and exit</li>
<li><code>-s</code> SEED, <code>--seed</code> SEED: seed for the random generator</li>
<li><code>-or</code> OCCUPANCY_RATE_RACKS, <code>--occupancy-rate-racks</code> OCCUPANCY_RATE_RACKS fraction of rack space that is initially occupied</li>
<li><code>-t</code> JIG_T_DIST, <code>--jig-type-distribution</code> JIG_T_DIST distribution of jigs types: (0) uniform, (1) small jigs preferred, (2) large jigs preferred (default: 1)</li>
<li><code>-f</code> NUM_FLIGHTS, <code>--num-flights</code> NUM_FLIGHTS number of incoming and outgoing Beluga flights</li>
<li><code>-us</code> [rack_space_general,outgoing_flight_not_sat,schedule_clashes ...], <code>--unsolvable</code> [rack_space_general,outgoing_flight_not_sat,schedule_clashes ...] scenario based on which the generator tries to generate an unsolvable instance</li>
<li><code>-v</code>, <code>--verbose</code> print debug output</li>
<li><code>-o</code> OUT, <code>--out</code> OUT output folder for the problem, if no folder is given, the problem is printed onto stdout</li>
<li><code>-on</code> OUT_NAME, <code>--out-name</code> OUT_NAME name for the problem, if no name is defined, a name based on the number of jigs, jig types, racks, the exact occupancy rate, the number of flights, the seed and potentially the unsolvability scenarios is generated</li>
<li><code>-pp</code>, <code>--probabilistic</code> Enables the probabilistic model, triggering the generation of probabilistic instances (default: False)</li>
<li><code>-pm {arrivals,ppddl}</code>, <code>--probabilistic-model {arrivals,ppddl}</code> Controls the type of probabilistic model, if the <code>-pp</code> option is enabled. If the <code>arrivals</code> options is used (the default), then the instance will contain only arrival times and will be suitable for a more realistic uncertainty semantic where flights are subject to stochastic delay; if the <code>ppddl</code> option is used, the instance will include information on uncertainty, specified in terms of probabilities of transition between abstract states. Every abstract state is identified by the sequence of a configurable number of the last flights (default: arrivals)</li>
<li><code>-pw PROBABILISTIC_WINDOW</code>, <code>--probabilistic-window PROBABILISTIC_WINDOW</code> Length of the sequence of flights used as the abstract state in the 'ppddl' probabilistic model. This parameter is ignored unless 'ppddl' probabilistic mode is enabled (default: 1)</li>
</ul>
<p>The file <code>configuration/default_configuration.py</code> defines the values of the remaining parameters of the generator. They are described in more detail below. In the competition these parameters are fixed, and we only consider instances with varying occupancy rate, jig type distribution and number of flights.</p>
<p>When no unsolvability scenario is specified, then the generator tries to generate a solvable instance, however the generator does <b>not ensure solvability</b>. The individual unsolvability scenarios are described below.</p>
<p>To generate a whole range of instances the script</p>
<div class="fragment"><div class="line">generate_instances.py [-h] -c CONFIG_FILE [-y] -o OUTPUT_FOLDER</div>
</div><!-- fragment --><p>can be used. The <code>CONFIG_FILE</code> specifies the occupancy rate, jig type distribution and number of flights in the format:</p>
<div class="fragment"><div class="line">saturation,jig_type_dist,n_flights</div>
<div class="line">80.0,0.0,49.0</div>
<div class="line">20.0,0.0,142.0</div>
<div class="line">...</div>
</div><!-- fragment --><p> where the <code>saturation</code>, <code>jig_type_dist</code> and <code>n_flights</code> refer to the parameters <code>--occupancy-rate-racks</code>, <code>--jig-type-distribution</code> and <code>--num-flights</code> respectively.</p>
<p>The parameters for the provided set of training instances can be found in the <a href="https://github.com/TUPLES-Trustworthy-AI/Beluga-AI-Challenge-Benchmarks">benchmarks repository</a>.</p>
<h2><a class="anchor" id="autotoc_md42"></a>
Fixed Configuration</h2>
<p>In addition to the instance generator can be configured with the following parameters. These also include distributions from which we draw a samples during instance generation. <code><a class="el" href="default__configuration_8py.html">configurations/default_configuration.py</a></code> contains the parameters and distributions we consider for the competition.</p>
<h3><a class="anchor" id="autotoc_md43"></a>
Jigs</h3>
<ul>
<li>We use a fix set of 5 jig types ranging from 4 to 32 units of length.</li>
<li><code>distribution_initial_jig_state</code>: Used to determine whether a jig initially on the racks is loaded or empty. Here we select 50/50 between loaded or empty.</li>
</ul>
<h3><a class="anchor" id="autotoc_md44"></a>
Racks</h3>
<ul>
<li>The rack size is sampled uniformly between 20 and 40</li>
<li>The number of racks depends on the number of flights and ranges between 1 and 20.</li>
</ul>
<h3><a class="anchor" id="autotoc_md45"></a>
Flights</h3>
<ul>
<li>The storage capacity of the Beluga is fixed to 40.</li>
<li><code>max_delivery_buffer</code>: maximal number of flights a jig waits before it is scheduled in a production line. For less than 50 flights it is <code>num_flights * 0.5</code> for more than 50 flights it is 25.</li>
<li><code>distribution_delivery_buffer</code>: Used to sample how many flights a jig waits before it is scheduled in the production line. Must be less or equal to <code>max_delivery_buffer</code>. We use a truncated normal distribution with center <code>0.25 * max_delivery_buffer</code>, a standard deviation of <code>0.5 * max_delivery_buffer</code> a lower bound of <code>1</code> and an upper bound of <code>max_delivery_buffer</code>.</li>
<li><code>distribution_next_production_line</code>: Used to determine which production line is scheduled next. The distribution depends on the number of jigs that have been delivered to a production line since the last delivery to any production line. We sample uniformly form a list of production lines, where the number of occurrences for each production line corresponds to how many jigs have been scheduled since this line has been chosen last.</li>
</ul>
<h3><a class="anchor" id="autotoc_md46"></a>
Trailers &amp; Hangars</h3>
<p>The number of trailers on the Beluga and on the factory side are sampled uniformly between 1 and 3. The same holds for the hangars.</p>
<h3><a class="anchor" id="autotoc_md47"></a>
Production Lines</h3>
<p>The number of trailers on the Beluga and on the factory side are sampled uniformly between 1 and 3. During the instance generation the parts are scheduled randomly between the production lines. To counteract an uneven distribution over the production lines, lines where fewer parts have been scheduled are preferred.</p>
<h2><a class="anchor" id="autotoc_md48"></a>
Unsolvability Scenario</h2>
<p>In case an unsolvable instance is needed the following scenarios are supported:</p>
<ul>
<li><code>RACK_SPACE_GENERAL</code>: Incoming flights carry the maximal number of jigs it is possible to fit in the Beluga, regardless of whether the racks have sufficient space to accommodate them. The outgoing flights are limited to at most one jig. This eventually results in more jigs on site than can fit on the racks and trailers. Depending on the number of flights, this strategy might not lead to an unsolvable instance.</li>
<li><code>OUTGOING_FLIGHT_NOT_SAT</code>: A random outgoing flight requires more jigs of a certain type than the number of jigs of that type that are on site, causing infeasibility.</li>
<li><code>SCHEDULE_CLASHES</code>: This scenario focuses on building instances with schedule clashes. A clash occurs for two loaded jigs J1 J2, if J2 arrives on a later flight than J1 but J2 needs to be delivered to a production line before J1. To build those instances, we modify the generator of the production schedule, by filling production schedules greedily to consume jigs in reverse order of their arrival. <br  />
 This is a more advanced version of the <code>OUTGOING_FLIGHT_NOT_SAT</code> scenario. However, it does not guarantee unsolvability.</li>
</ul>
<h1><a class="anchor" id="autotoc_md49"></a>
PDDL Encoding</h1>
<p>We provide a <b>classical</b> as well as a <b>numeric</b> PDDL encoding.</p>
<p>In the classical encoding the rack and jig sizes as well as the free space in each rack are encoded by individual <code>numXX</code> objects. The predicate <code>fit(a-b,b,a)</code> is then used to determine whether a jig still fits into a rack. For the numeric encoding however the rack and jig sizes are defined by functions and the <em>fit</em> check is done by a numeric comparison.</p>
<p>Except for these differences the classical and numeric encoding are the same.</p>
<p>To encode one instance you can use the script </p><pre class="fragment">json2PDDL.py [-h] [-o PROBLEM_OUT] -i INSTANCE [-n]
</pre><p>It takes one JSON instance description and encodes it per default as a classic PDDL problem or with <code>-n</code> using the numeric encoding. A matching domain file is automatically generated.</p>
<p>To encode multiple instances use </p><pre class="fragment">encode_instances.py [-h] [-n] -i I -o O [-y]
</pre><p>It encodes all instances and generates matching domain files.</p>
<h1><a class="anchor" id="autotoc_md50"></a>
Scikit-decide Domain Tester</h1>
<p>The toolkit includes a script for testing the three scikit-decide domains developed for the competition; these can be used by the competitors to assist the development of their own solution, they are employed by the (trivial) example planners included in the toolkit, and are used as the basis for the evaluation scripts.</p>
<p>The three domains are built around the <code>plado</code> module and are respectively:</p>
<ul>
<li><code>SkdPDDLDomain</code>: a deterministic problem domain that can rely on either the classic or the numeric PDDL encodings used in the competition</li>
<li><code>SkdSPDDLDomain</code>: a probabilistic domain suitable for use in Reinforcement Learning solutions</li>
<li><code>SkdPPDDLDomain</code>: a probabilistic domain compatible with the abstract probabilistic model and with the coresponding PPDDL encoding</li>
</ul>
<p>The testing script generates a problem instance and then triggers a simulation process, where a valid action are sampled at random at every step.</p>
<p>The usage is as follows:</p>
<div class="fragment"><div class="line">usage: generate_simulate_test.py [-h] [-s SEED] [-njt NUM_JIG_TYPES] [-or OCCUPANCY_RATE_RACKS] [-r NUM_RACKS] [-msr MAX_SIZE_RACKS]</div>
<div class="line">                                 [-f NUM_FLIGHTS] [-sb SIZE_BELUGA] [-bt NUM_BELUGA_TRAILERS] [-ft NUM_FACTORY_TRAILERS] [-hs NUM_HANGARS]</div>
<div class="line">                                 [-p NUM_PRODUCTION_LINES] [-us {rack_space_general,outgoing_flight_not_sat,schedule_clashes}] [-v]</div>
<div class="line">                                 [-o OUT] [-on OUT_NAME] [-pp] [-pm {arrivals,ppddl}] [-pw PROBABILISTIC_WINDOW] [-n]</div>
<div class="line">                                 [-ms MAX_SIMULATION_STEPS]</div>
</div><!-- fragment --><p>The configuration parameters include those used by the problem generator, plus:</p>
<ul>
<li><code>-n</code> numeric encoding, otherwise classic encoding (default: False)</li>
<li><code>-ms MAX_SIMULATION_STEPS</code> maximum number of simulation steps unless the goal is reached before (default: None)</li>
</ul>
<h1><a class="anchor" id="autotoc_md51"></a>
Gymnasium Environment Tester</h1>
<p>The toolkit provides a way to cast each of the 3 above scikit-decide Beluga domains to a gymnasium environment to be used by deep reinforcement learning approaches. This can be done in 2 steps:</p>
<ol type="1">
<li>Specialize the <code>BelugaGymCompatibleDomain</code> class defined in the <code><a class="el" href="skd__gym__domain_8py.html">skd_gym_domain.py</a></code> script to your tensor representation needs ;</li>
<li>Pass your specialized domain class to the <code>BelugaGymEnv</code> class defined in the same script; this will be your gym environment.</li>
</ol>
<p>The <code><a class="el" href="generate__solve__rllib__test_8py.html">generate_solve_rllib_test.py</a></code> script gives an example of such a specialized gym-compatible domain class that can make each of the original domain classes (i.e. <code>SkdPDDLDomain</code>, <code>SkdSPDDLDomain</code> or <code>SkdPPDDLDomain</code>) use state and action tensors. The script further shows how to pass an instance of this gym-compatible domain class to the <code>BelugaGymEnv</code> class, and how to call RLlib's PPO algorithm on this gym environment class. The script can be used as follows:</p>
<div class="fragment"><div class="line">usage: generate_solve_rllib_test.py [-h] [-s SEED] [-njt NUM_JIG_TYPES] [-or OCCUPANCY_RATE_RACKS] [-r NUM_RACKS] [-msr MAX_SIZE_RACKS]</div>
<div class="line">                                    [-f NUM_FLIGHTS] [-sb SIZE_BELUGA] [-bt NUM_BELUGA_TRAILERS] [-ft NUM_FACTORY_TRAILERS] [-hs NUM_HANGARS]</div>
<div class="line">                                    [-p NUM_PRODUCTION_LINES] [-us {rack_space_general,outgoing_flight_not_sat,schedule_clashes}] [-v]</div>
<div class="line">                                    [-o OUT] [-on OUT_NAME] [-pp] [-pm {arrivals,ppddl}] [-pw PROBABILISTIC_WINDOW] [-n]</div>
<div class="line">                                    [-ms MAX_SIMULATION_STEPS]</div>
</div><!-- fragment --><p>The configuration parameters are the same as the ones of the scikit-decide domain tester.</p>
<h1><a class="anchor" id="autotoc_md52"></a>
Evaluator</h1>
<p>The toolkit includes a template for an evaluation script relying on the same protocol employed for the official competition. This can be useful both for testing the API of the solutions developed by the competitor, and for computing the official KPIs.</p>
<p>In particular, this evaluation script is designed to test solutions complying with the API in <code><a class="el" href="planner__api_8py.html">evaluation/planner_api.py</a></code>, and provides support for naive example implementations (based on random action sampling and the Lazy A* solver from scikit-decide). The code for these examples can be found in <code><a class="el" href="planner__examples_8py.html">evaluation/planner_examples.py</a></code> and can be used as a starting point for the competitors' code.</p>
<p>The script can be used or modified to handle new solution approaches as follows:</p>
<ul>
<li>Competitors can modify the <code>build_planner</code> function in <code><a class="el" href="evaluate__instance_8py.html">evaluate_instance.py</a></code> to add support for their own approach</li>
<li>For the deterministic track, it is also possible to use the script to evaluate a pre-built plan, in JSON format, by using the <code>--prebuilt-plan</code> command line option; this approach is not available for the probabilistic track, for which the goal is building a policy rather than a single plan</li>
</ul>
<p>We stress that this script should be considered just a template. The official evaluation will rely on an implementation based on web services. A default wrapper will be made available for solution approaches based on the API from <code><a class="el" href="planner__api_8py.html">evaluation/planner_api.py</a></code>.</p>
<p>The evaluation script can be used as follows:</p>
<div class="fragment"><div class="line">usage: evaluate_instance.py [-h] [-i INPUT_PROBLEM] [-s SEED] [-or OCCUPANCY_RATE_RACKS] [-t JIG_T_DIST] [-f NUM_FLIGHTS]</div>
<div class="line">                            [-us {rack_space_general,outgoing_flight_not_sat,schedule_clashes}] [-v] [-o OUT] [-on OUT_NAME] [-pp] [-pm {arrivals,ppddl}]</div>
<div class="line">                            [-ms MAX_SIMULATION_STEPS] [-ns NUM_SAMPLES] [-tl TIME_LIMIT] [-pln {random,lazy_astar}] [--prebuilt-plan DET_PLAN_FILE] [-ppe]</div>
</div><!-- fragment --><p>The script can be used to evaluate a solution on an existing instance (by specifying the <code>--input</code> parameter) or on an instance generated on the fly. The parameters include those used by the generator (which are ignored in case <code>--input</code> is used), plus:</p>
<ul>
<li><code>-ms MAX_SIMULATION_STEPS</code>, <code>--max_steps MAX_SIMULATION_STEPS</code> maximum number of steps within which the goal should be reached (default: 50)</li>
<li><code>-ns NUM_SAMPLES</code>, <code>--num_samples NUM_SAMPLES</code> number of samples for the evaluation. This parameter has no effect in case of a deterministic evaluation (default: 1) -tl TIME_LIMIT, &ndash;time-limit TIME_LIMIT time limit for the evaluation (default: None)</li>
<li><code>-pln {random,lazy_astar}</code>, <code>--planner {random,lazy_astar}</code> the planner to be used for the test (default: random)</li>
<li><code>-ppe</code>, <code>--probabilistic-evaluation</code> enable probabilistic evaluation; this is automtically enable in case a probabilistic instance is generated (default: False)</li>
<li><code>--prebuilt-plan DET_PLAN_FILE</code> When this opton is used, the evaluator will process a single, pre-built plan in JSON format. Using this option: 1) overrides plan construction; 2) requires to specify and input plan; and 3) is incompatible with probabilistic evaluation (default: None)</li>
</ul>
<h1><a class="anchor" id="autotoc_md53"></a>
Probabilistic Model</h1>
<p>The probabilistic problem variants account for the fact that in the real world flights can deviate from their scheduled arrival times. This process is simulated according to a simplified uncertainty model, which works as follows:</p>
<ul>
<li>When a problem instance is generated, we assign to each flight a scheduled arrival time</li>
<li>When a plan is executed, we simulate the delays</li>
</ul>
<p>For this reason, all tools designed to work with the probabilistic problem require instances generated with the <code>-pp</code> flag. In addition, the PPDDL encoder and the related scikit-decide domain require access to the parameters of the abstracted uncertainty model, which are also built at instance generation time, by passing the command line argument <code>-pm ppddl</code>.</p>
<p>Scheduled arrival times are generated as follows:</p>
<ul>
<li>For each hour in a day:<ul>
<li>We sample a number of arrivals according to a Poisson distribution</li>
<li>We assign arrival times within the considered hour according to a uniform distribution</li>
</ul>
</li>
</ul>
<p>The rates for the Poisson distribution depend on the hour of the day and have been calibrated based on real world arrival data. Such rates are available in the file <code><a class="el" href="hourly__rates_8json.html">utils/configuration/hourly_rates.json</a></code>. The same distribution is employed to generate all benchmark instances in the competition, including the training instances (provided to all competitors), the validation instances (used to compute metrics when a new submission is made), and the test instances (employed to obtain the final competition ranking).</p>
<p>Delays are generated following a discretized continuous distribution, also calibrated on real-world data. Information on the distribution can be found in the file <code><a class="el" href="delay__distribution_8json.html">utils/configuration/delay_distribution.json</a></code>. The same distribution is used to simulate all benchmark instances in the competition.</p>
<h1><a class="anchor" id="autotoc_md54"></a>
Benchmark Distributions</h1>
<p>All benchmark instances for the scalability challenges are sampled from the same distribution for the problem generator. This also applies to the probabilistic benchmarks, since the same parameters for the uncertainty model are used in all cases.</p>
<p>In detail, we consider the three main problem generator parameters, i.e.:</p>
<ul>
<li>The initial occupancy rate of the rackes (i.e. the <code>-oc</code> parameter in the generator)</li>
<li>The jig type distribution (i.e. the <code>-t</code> parameter in the generator)</li>
<li>The number of flights (i.e. the <code>-f</code> parameter in the generator)</li>
</ul>
<p>In effort to improve coverage of the possible parameter combinations, their values are obtained via Latin Hypercube Sampling, considering the following ranges:</p>
<ul>
<li>Three possible occupancy values, i.e. 20, 50, and 80</li>
<li>The three possible jig type distributions, i.e. 0, 1, and 2</li>
<li>Values in [0, sqrt(200-3)] for the square root of the number of flights in addition to a minimum (which consists of 3 flights)</li>
</ul>
<p>The process results in an approximately uniform distribution for the occupancy levels and the jig type distribution. The sampled number of flights are in the range [3..200], with a bias in favor of smaller instance, due to the use of a non-linear scale. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
