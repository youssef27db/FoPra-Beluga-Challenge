\doxysection{rl.\+utils.\+problem\+\_\+filter Namespace Reference}
\hypertarget{namespacerl_1_1utils_1_1problem__filter}{}\label{namespacerl_1_1utils_1_1problem__filter}\index{rl.utils.problem\_filter@{rl.utils.problem\_filter}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacerl_1_1utils_1_1problem__filter_a293a32843cda0fc57412353e615a0bbb}{filter\+\_\+problem}} (input\+\_\+file, output\+\_\+file, max\+\_\+jigs, max\+\_\+belugas, max\+\_\+prod\+\_\+lines, max\+\_\+racks)
\begin{DoxyCompactList}\small\item\em Filter a problem instance to reduce its complexity. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacerl_1_1utils_1_1problem__filter_a8168d79ef8921b7e8232c95fed44fde8}{generate\+\_\+problems}} (num\+\_\+problems=20, input\+\_\+folder="{}problems"{}, output\+\_\+folder="{}problemset1"{}, jig\+\_\+range=(5, 30), beluga\+\_\+range=(2, 8), prod\+\_\+line\+\_\+range=(2, 6), rack\+\_\+range=(2, 10))
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
dict \mbox{\hyperlink{namespacerl_1_1utils_1_1problem__filter_a95276af8fc881a54b9dbef49fc55515e}{JIG\+\_\+\+TYPES}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{namespacerl_1_1utils_1_1problem__filter_a293a32843cda0fc57412353e615a0bbb}\index{rl.utils.problem\_filter@{rl.utils.problem\_filter}!filter\_problem@{filter\_problem}}
\index{filter\_problem@{filter\_problem}!rl.utils.problem\_filter@{rl.utils.problem\_filter}}
\doxysubsubsection{\texorpdfstring{filter\_problem()}{filter\_problem()}}
{\footnotesize\ttfamily \label{namespacerl_1_1utils_1_1problem__filter_a293a32843cda0fc57412353e615a0bbb} 
rl.\+utils.\+problem\+\_\+filter.\+filter\+\_\+problem (\begin{DoxyParamCaption}\item[{}]{input\+\_\+file}{, }\item[{}]{output\+\_\+file}{, }\item[{}]{max\+\_\+jigs}{, }\item[{}]{max\+\_\+belugas}{, }\item[{}]{max\+\_\+prod\+\_\+lines}{, }\item[{}]{max\+\_\+racks}{}\end{DoxyParamCaption})}



Filter a problem instance to reduce its complexity. 

This function takes a problem JSON file and creates a simplified version by limiting the number of jigs, belugas, production lines, and racks.


\begin{DoxyParams}{Parameters}
{\em input\+\_\+file} & Path to the input problem JSON file \\
\hline
{\em output\+\_\+file} & Path for the output filtered problem JSON file \\
\hline
{\em max\+\_\+jigs} & Maximum number of jigs to keep \\
\hline
{\em max\+\_\+belugas} & Maximum number of belugas to keep \\
\hline
{\em max\+\_\+prod\+\_\+lines} & Maximum number of production lines to keep \\
\hline
{\em max\+\_\+racks} & Maximum number of racks to keep \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00023\ \textcolor{keyword}{def\ }filter\_problem(input\_file,\ output\_file,\ max\_jigs,\ max\_belugas,\ max\_prod\_lines,\ max\_racks): }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}! }}
\DoxyCodeLine{00025\ \textcolor{stringliteral}{\ \ \ \ @brief\ Filter\ a\ problem\ instance\ to\ reduce\ its\ complexity }}
\DoxyCodeLine{00026\ \textcolor{stringliteral}{\ \ \ \  }}
\DoxyCodeLine{00027\ \textcolor{stringliteral}{\ \ \ \ This\ function\ takes\ a\ problem\ JSON\ file\ and\ creates\ a\ simplified\ version }}
\DoxyCodeLine{00028\ \textcolor{stringliteral}{\ \ \ \ by\ limiting\ the\ number\ of\ jigs,\ belugas,\ production\ lines,\ and\ racks. }}
\DoxyCodeLine{00029\ \textcolor{stringliteral}{\ \ \ \  }}
\DoxyCodeLine{00030\ \textcolor{stringliteral}{\ \ \ \ @param\ input\_file\ Path\ to\ the\ input\ problem\ JSON\ file }}
\DoxyCodeLine{00031\ \textcolor{stringliteral}{\ \ \ \ @param\ output\_file\ Path\ for\ the\ output\ filtered\ problem\ JSON\ file }}
\DoxyCodeLine{00032\ \textcolor{stringliteral}{\ \ \ \ @param\ max\_jigs\ Maximum\ number\ of\ jigs\ to\ keep }}
\DoxyCodeLine{00033\ \textcolor{stringliteral}{\ \ \ \ @param\ max\_belugas\ Maximum\ number\ of\ belugas\ to\ keep }}
\DoxyCodeLine{00034\ \textcolor{stringliteral}{\ \ \ \ @param\ max\_prod\_lines\ Maximum\ number\ of\ production\ lines\ to\ keep }}
\DoxyCodeLine{00035\ \textcolor{stringliteral}{\ \ \ \ @param\ max\_racks\ Maximum\ number\ of\ racks\ to\ keep }}
\DoxyCodeLine{00036\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}} }
\DoxyCodeLine{00037\  }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keyword}{with}\ open(input\_file)\ \textcolor{keyword}{as}\ f: }
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ data\ =\ json.load(f) }
\DoxyCodeLine{00040\  }
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{comment}{\#\ Step\ 1:\ Trim\ jigs }}
\DoxyCodeLine{00042\ \ \ \ \ all\_jig\_keys\ =\ list(data[\textcolor{stringliteral}{"{}jigs"{}}].keys()) }
\DoxyCodeLine{00043\ \ \ \ \ kept\_jig\_keys\ =\ set(all\_jig\_keys[:max\_jigs]) }
\DoxyCodeLine{00044\ \ \ \ \  }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{comment}{\#\ Remove\ unnecessary\ jigs }}
\DoxyCodeLine{00046\ \ \ \ \ data[\textcolor{stringliteral}{"{}jigs"{}}]\ =\ \{k:\ v\ \textcolor{keywordflow}{for}\ k,\ v\ \textcolor{keywordflow}{in}\ data[\textcolor{stringliteral}{"{}jigs"{}}].items()\ \textcolor{keywordflow}{if}\ k\ \textcolor{keywordflow}{in}\ kept\_jig\_keys\} }
\DoxyCodeLine{00047\  }
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{comment}{\#\ Clean\ racks }}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordflow}{for}\ rack\ \textcolor{keywordflow}{in}\ data[\textcolor{stringliteral}{"{}racks"{}}]: }
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ rack[\textcolor{stringliteral}{"{}jigs"{}}]\ =\ [] }
\DoxyCodeLine{00051\  }
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{comment}{\#\ Clean\ production\ lines }}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordflow}{for}\ pl\ \textcolor{keywordflow}{in}\ data[\textcolor{stringliteral}{"{}production\_lines"{}}]: }
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ pl[\textcolor{stringliteral}{"{}schedule"{}}]\ =\ [] }
\DoxyCodeLine{00055\  }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{comment}{\#\ Clean\ flights }}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordflow}{for}\ flight\ \textcolor{keywordflow}{in}\ data[\textcolor{stringliteral}{"{}flights"{}}]: }
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ flight[\textcolor{stringliteral}{"{}incoming"{}}]\ =\ [] }
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ flight[\textcolor{stringliteral}{"{}outgoing"{}}]\ =\ [] }
\DoxyCodeLine{00060\  }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{\#\ Schritt\ 2:\ Belugas,\ Racks\ und\ Produktionslinien\ trimmen }}
\DoxyCodeLine{00062\ \ \ \ \ data[\textcolor{stringliteral}{"{}flights"{}}]\ =\ data[\textcolor{stringliteral}{"{}flights"{}}][:max\_belugas] }
\DoxyCodeLine{00063\ \ \ \ \ data[\textcolor{stringliteral}{"{}racks"{}}]\ =\ data[\textcolor{stringliteral}{"{}racks"{}}][:max\_racks] }
\DoxyCodeLine{00064\ \ \ \ \ data[\textcolor{stringliteral}{"{}production\_lines"{}}]\ =\ data[\textcolor{stringliteral}{"{}production\_lines"{}}][:max\_prod\_lines] }
\DoxyCodeLine{00065\  }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{comment}{\#\ Schritt\ 3:\ Wir\ nehmen\ ein\ sample\ von\ Jigs\ und\ packen\ es\ in\ die\ Produktionslinien }}
\DoxyCodeLine{00067\ \ \ \ \ non\_empty\_jigs\ =\ [k\ \textcolor{keywordflow}{for}\ k,\ v\ \textcolor{keywordflow}{in}\ data[\textcolor{stringliteral}{"{}jigs"{}}].items()\ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ v.get(\textcolor{stringliteral}{"{}empty"{}},\ \textcolor{keyword}{False})] }
\DoxyCodeLine{00068\ \ \ \ \ random.shuffle(non\_empty\_jigs) }
\DoxyCodeLine{00069\  }
\DoxyCodeLine{00070\ \ \ \ \ used\_jigs\ =\ set() }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordflow}{for}\ pl\ \textcolor{keywordflow}{in}\ data[\textcolor{stringliteral}{"{}production\_lines"{}}]: }
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ non\_empty\_jigs: }
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break} }
\DoxyCodeLine{00074\  }
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ max\_count\ =\ min(15,\ len(non\_empty\_jigs))\ \ \textcolor{comment}{\#\ max\ 15\ Jigs\ pro\ Linie\ oder\ weniger,\ je\ nach\ Verfügbarkeit }}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ count\ =\ random.randint(1,\ max\_count)\ \ \ \ \ \textcolor{comment}{\#\ zufällige\ Anzahl\ Jigs\ (1\ bis\ max\_count) }}
\DoxyCodeLine{00077\ \ \ \ \  }
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ selected\ =\ non\_empty\_jigs[:count] }
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ pl[\textcolor{stringliteral}{"{}schedule"{}}]\ =\ selected }
\DoxyCodeLine{00080\  }
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ used\_jigs.update(selected) }
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ non\_empty\_jigs\ =\ non\_empty\_jigs[count:] }
\DoxyCodeLine{00083\  }
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{comment}{\#\ Schritt\ 4:\ Verteile\ die\ verwendeten\ Jigs\ aus\ den\ Produktionslinien }}
\DoxyCodeLine{00085\ \ \ \ \ used\_jigs\ =\ set(jig\ \textcolor{keywordflow}{for}\ pl\ \textcolor{keywordflow}{in}\ data[\textcolor{stringliteral}{"{}production\_lines"{}}]\ \textcolor{keywordflow}{for}\ jig\ \textcolor{keywordflow}{in}\ pl[\textcolor{stringliteral}{"{}schedule"{}}]) }
\DoxyCodeLine{00086\  }
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{comment}{\#\ Liste\ der\ verwendbaren\ Jigs\ mit\ Größenangabe }}
\DoxyCodeLine{00088\ \ \ \ \ jig\_objects\ =\ [] }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordflow}{for}\ jig\_id\ \textcolor{keywordflow}{in}\ used\_jigs: }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ jig\ =\ data[\textcolor{stringliteral}{"{}jigs"{}}][jig\_id] }
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ jig\_type\ =\ jig[\textcolor{stringliteral}{"{}type"{}}] }
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ type\_info\ =\ data[\textcolor{stringliteral}{"{}jig\_types"{}}][jig\_type] }
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ size\_loaded\ =\ type\_info[\textcolor{stringliteral}{"{}size\_loaded"{}}] }
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ jig\_objects.append((jig\_id,\ size\_loaded)) }
\DoxyCodeLine{00095\  }
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{comment}{\#\ Zuerst\ ein\ paar\ wenige\ Jigs\ für\ Racks\ auswählen }}
\DoxyCodeLine{00097\ \ \ \ \ rack\_fraction\ =\ max(1,\ int(0.1\ *\ len(jig\_objects)))\ \ \textcolor{comment}{\#\ 10\%\ für\ jigs\ in\ Racks }}
\DoxyCodeLine{00098\ \ \ \ \ random.shuffle(jig\_objects) }
\DoxyCodeLine{00099\  }
\DoxyCodeLine{00100\ \ \ \ \ rack\_jigs\ =\ [] }
\DoxyCodeLine{00101\ \ \ \ \ beluga\_jigs\ =\ [] }
\DoxyCodeLine{00102\  }
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{comment}{\#\ Kopie\ der\ racks\ zum\ Füllen\ (mit\ current\_size\ zum\ Tracken) }}
\DoxyCodeLine{00104\ \ \ \ \ racks\_state\ =\ [] }
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordflow}{for}\ rack\ \textcolor{keywordflow}{in}\ data[\textcolor{stringliteral}{"{}racks"{}}]: }
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ racks\_state.append(\{ }
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}rack"{}}:\ rack, }
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}remaining\_size"{}}:\ rack[\textcolor{stringliteral}{"{}size"{}}], }
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}jigs"{}}:\ [] }
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \}) }
\DoxyCodeLine{00111\  }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{comment}{\#\ 1.\ Packe\ ein\ paar\ wenige\ Jigs\ in\ passende\ Racks }}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keywordflow}{for}\ jig\_id,\ jig\_size\ \textcolor{keywordflow}{in}\ jig\_objects: }
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(rack\_jigs)\ >=\ rack\_fraction: }
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break} }
\DoxyCodeLine{00116\  }
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Suche\ einen\ Rack\ mit\ genug\ Platz }}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ rack\_info\ \textcolor{keywordflow}{in}\ racks\_state: }
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ jig\_size\ <=\ rack\_info[\textcolor{stringliteral}{"{}remaining\_size"{}}]: }
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rack\_info[\textcolor{stringliteral}{"{}jigs"{}}].append(jig\_id) }
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rack\_info[\textcolor{stringliteral}{"{}remaining\_size"{}}]\ -\/=\ jig\_size }
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rack\_jigs.append(jig\_id) }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break} }
\DoxyCodeLine{00124\  }
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{comment}{\#\ Update\ racks\ mit\ den\ zugewiesenen\ Jigs }}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordflow}{for}\ rack\_info\ \textcolor{keywordflow}{in}\ racks\_state: }
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ rack\_info[\textcolor{stringliteral}{"{}rack"{}}][\textcolor{stringliteral}{"{}jigs"{}}]\ =\ rack\_info[\textcolor{stringliteral}{"{}jigs"{}}] }
\DoxyCodeLine{00128\  }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{comment}{\#\ 2.\ Der\ Rest\ kommt\ in\ die\ Belugas\ (gleichmäßig\ verteilen) }}
\DoxyCodeLine{00130\ \ \ \ \ beluga\_jigs\ =\ [jig\ \textcolor{keywordflow}{for}\ jig\ \textcolor{keywordflow}{in}\ used\_jigs\ \textcolor{keywordflow}{if}\ jig\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ rack\_jigs] }
\DoxyCodeLine{00131\ \ \ \ \ num\_belugas\ =\ len(data[\textcolor{stringliteral}{"{}flights"{}}]) }
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keywordflow}{for}\ i,\ jig\ \textcolor{keywordflow}{in}\ enumerate(beluga\_jigs): }
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ beluga\ =\ data[\textcolor{stringliteral}{"{}flights"{}}][i\ \%\ num\_belugas] }
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ beluga[\textcolor{stringliteral}{"{}incoming"{}}].append(jig) }
\DoxyCodeLine{00135\  }
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{comment}{\#\ Schritt\ 5:\ Paar\ random\ jigs\ in\ racks\ und\ belugas\ verteilen\ (Jigs\ die\ aber\ davor\ nicht\ benutzt\ worden\ sind) }}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{comment}{\#\ Alle\ Jig-\/IDs,\ die\ bisher\ noch\ NICHT\ verwendet\ wurden }}
\DoxyCodeLine{00138\ \ \ \ \ all\_jig\_ids\ =\ set(data[\textcolor{stringliteral}{"{}jigs"{}}].keys()) }
\DoxyCodeLine{00139\ \ \ \ \ unused\_jigs\ =\ list(all\_jig\_ids\ -\/\ used\_jigs) }
\DoxyCodeLine{00140\ \ \ \ \ random.shuffle(unused\_jigs) }
\DoxyCodeLine{00141\  }
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{comment}{\#\ Wie\ viele\ zusätzliche\ Jigs\ wollen\ wir\ zufällig\ verteilen? }}
\DoxyCodeLine{00143\ \ \ \ \ random\_int\ =\ random.randint(3,\ 10)\ \textcolor{comment}{\#\ (3,\ 10)\ für\ kleine\ Probleme,\ mehr\ für\ größere }}
\DoxyCodeLine{00144\ \ \ \ \ extra\_count\ =\ min(random\_int,\ len(unused\_jigs))\  }
\DoxyCodeLine{00145\ \ \ \ \ extra\_jigs\ =\ unused\_jigs[:extra\_count] }
\DoxyCodeLine{00146\  }
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{comment}{\#\ Racks\ vorbereiten\ mit\ verbleibender\ Größe }}
\DoxyCodeLine{00148\ \ \ \ \ racks\_state\ =\ [] }
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordflow}{for}\ rack\ \textcolor{keywordflow}{in}\ data[\textcolor{stringliteral}{"{}racks"{}}]: }
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ current\_jigs\ =\ rack.get(\textcolor{stringliteral}{"{}jigs"{}},\ []) }
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ remaining\ =\ rack[\textcolor{stringliteral}{"{}size"{}}] }
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ jig\_id\ \textcolor{keywordflow}{in}\ current\_jigs: }
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ jig\_type\ =\ data[\textcolor{stringliteral}{"{}jigs"{}}][jig\_id][\textcolor{stringliteral}{"{}type"{}}] }
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ is\_empty\ =\ data[\textcolor{stringliteral}{"{}jigs"{}}][jig\_id].get(\textcolor{stringliteral}{"{}empty"{}},\ \textcolor{keyword}{False}) }
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ size\ =\ data[\textcolor{stringliteral}{"{}jig\_types"{}}][jig\_type][\textcolor{stringliteral}{"{}size\_empty"{}}\ \textcolor{keywordflow}{if}\ is\_empty\ \textcolor{keywordflow}{else}\ \textcolor{stringliteral}{"{}size\_loaded"{}}] }
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ remaining\ -\/=\ size }
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ racks\_state.append(\{ }
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}rack"{}}:\ rack, }
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}remaining\_size"{}}:\ remaining, }
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}jigs"{}}:\ current\_jigs }
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \}) }
\DoxyCodeLine{00162\  }
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{comment}{\#\ Jetzt\ verteilen\ wir\ die\ zusätzlichen\ Jigs }}
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keywordflow}{for}\ jig\_id\ \textcolor{keywordflow}{in}\ extra\_jigs: }
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ jig\ =\ data[\textcolor{stringliteral}{"{}jigs"{}}][jig\_id] }
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ jig\_type\ =\ jig[\textcolor{stringliteral}{"{}type"{}}] }
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ is\_empty\ =\ jig.get(\textcolor{stringliteral}{"{}empty"{}},\ \textcolor{keyword}{False}) }
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ size\ =\ data[\textcolor{stringliteral}{"{}jig\_types"{}}][jig\_type][\textcolor{stringliteral}{"{}size\_empty"{}}\ \textcolor{keywordflow}{if}\ is\_empty\ \textcolor{keywordflow}{else}\ \textcolor{stringliteral}{"{}size\_loaded"{}}] }
\DoxyCodeLine{00169\  }
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Zufällig\ entscheiden:\ Rack\ oder\ Beluga }}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ target\ =\ random.choice([\textcolor{stringliteral}{"{}rack"{}},\ \textcolor{stringliteral}{"{}beluga"{}}]) }
\DoxyCodeLine{00172\  }
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ target\ ==\ \textcolor{stringliteral}{"{}rack"{}}: }
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ random.shuffle(racks\_state) }
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ placed\ =\ \textcolor{keyword}{False} }
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ rack\_info\ \textcolor{keywordflow}{in}\ racks\_state: }
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ size\ <=\ rack\_info[\textcolor{stringliteral}{"{}remaining\_size"{}}]: }
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rack\_info[\textcolor{stringliteral}{"{}rack"{}}][\textcolor{stringliteral}{"{}jigs"{}}].append(jig\_id) }
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rack\_info[\textcolor{stringliteral}{"{}remaining\_size"{}}]\ -\/=\ size }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ placed\ =\ \textcolor{keyword}{True} }
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break} }
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ placed: }
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Kein\ Rack\ mit\ Platz\ gefunden\ →\ auf\ Beluga\ ausweichen }}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ target\ =\ \textcolor{stringliteral}{"{}beluga"{}} }
\DoxyCodeLine{00185\  }
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ target\ ==\ \textcolor{stringliteral}{"{}beluga"{}}\ \textcolor{keywordflow}{and}\ \textcolor{keywordflow}{not}\ is\_empty: }
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ beluga\ =\ random.choice(data[\textcolor{stringliteral}{"{}flights"{}}]) }
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ beluga[\textcolor{stringliteral}{"{}incoming"{}}].append(jig\_id) }
\DoxyCodeLine{00189\  }
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{comment}{\#\ Schritt\ 6:\ Von\ den\ ganzen\ Jigs\ nemmen\ wir\ ein\ random\ sample\ von\ Jig\_Typen\ und\ verteile\ es\ auf\ die\ Outgoing\ der\ Belugas }}
\DoxyCodeLine{00191\  }
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{comment}{\#\ Alle\ benutzten\ Jigs:\ Belugas\ und\ Racks }}
\DoxyCodeLine{00193\ \ \ \ \ all\_used\_jigs\ =\ set() }
\DoxyCodeLine{00194\  }
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keywordflow}{for}\ rack\ \textcolor{keywordflow}{in}\ data[\textcolor{stringliteral}{"{}racks"{}}]: }
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ all\_used\_jigs.update(rack.get(\textcolor{stringliteral}{"{}jigs"{}},\ [])) }
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keywordflow}{for}\ beluga\ \textcolor{keywordflow}{in}\ data[\textcolor{stringliteral}{"{}flights"{}}]: }
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ all\_used\_jigs.update(beluga.get(\textcolor{stringliteral}{"{}incoming"{}},\ [])) }
\DoxyCodeLine{00199\  }
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{comment}{\#\ Alle\ Jig-\/Typen\ extrahieren }}
\DoxyCodeLine{00201\ \ \ \ \ jig\_types\_used\ =\ [data[\textcolor{stringliteral}{"{}jigs"{}}][jig\_id][\textcolor{stringliteral}{"{}type"{}}]\ \textcolor{keywordflow}{for}\ jig\_id\ \textcolor{keywordflow}{in}\ all\_used\_jigs] }
\DoxyCodeLine{00202\  }
\DoxyCodeLine{00203\ \ \ \ \ random.shuffle(jig\_types\_used) }
\DoxyCodeLine{00204\ \ \ \ \ max\_types\ =\ min(8,\ len(jig\_types\_used))\ \textcolor{comment}{\#\ 8\ bei\ kleinen\ Problemen,\ sonst\ mehr\ je\ schweriger\ das\ Problem }}
\DoxyCodeLine{00205\ \ \ \ \  }
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{keywordflow}{if}\ max\_types\ >=\ 1: }
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ count\_to\_use\ =\ random.randint(0,\ max\_types) }
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keywordflow}{else}: }
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ count\_to\_use\ =\ 0 }
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \  }
\DoxyCodeLine{00211\ \ \ \ \ types\_to\_distribute\ =\ jig\_types\_used[:count\_to\_use] }
\DoxyCodeLine{00212\  }
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{comment}{\#\ Verteile\ die\ Typen\ zufällig\ auf\ die\ Belugas }}
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keywordflow}{for}\ jig\_type\ \textcolor{keywordflow}{in}\ types\_to\_distribute: }
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ beluga\ =\ random.choice(data[\textcolor{stringliteral}{"{}flights"{}}]) }
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ beluga[\textcolor{stringliteral}{"{}outgoing"{}}].append(jig\_type) }
\DoxyCodeLine{00217\  }
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{comment}{\#\ Schritt\ 7:\ Entferne\ belugas\ und\ produktionslinien,\ die\ leer\ sind }}
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{comment}{\#\ Production\ lines\ filtern:\ nur\ behalten,\ wenn\ schedule\ nicht\ leer\ ist }}
\DoxyCodeLine{00220\ \ \ \ \ data[\textcolor{stringliteral}{"{}production\_lines"{}}]\ =\ [ }
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ pl\ \textcolor{keywordflow}{for}\ pl\ \textcolor{keywordflow}{in}\ data[\textcolor{stringliteral}{"{}production\_lines"{}}]\ \textcolor{keywordflow}{if}\ pl.get(\textcolor{stringliteral}{"{}schedule"{}}) }
\DoxyCodeLine{00222\ \ \ \ \ ] }
\DoxyCodeLine{00223\  }
\DoxyCodeLine{00224\ \ \ \ \ \textcolor{comment}{\#\ Belugas\ filtern:\ nur\ behalten,\ wenn\ incoming\ oder\ outgoing\ nicht\ leer\ sind }}
\DoxyCodeLine{00225\ \ \ \ \ data[\textcolor{stringliteral}{"{}flights"{}}]\ =\ [ }
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ fl\ \textcolor{keywordflow}{for}\ fl\ \textcolor{keywordflow}{in}\ data[\textcolor{stringliteral}{"{}flights"{}}] }
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ fl.get(\textcolor{stringliteral}{"{}incoming"{}})\ \textcolor{keywordflow}{or}\ fl.get(\textcolor{stringliteral}{"{}outgoing"{}}) }
\DoxyCodeLine{00228\ \ \ \ \ ] }
\DoxyCodeLine{00229\  }
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{comment}{\#\ Speichern }}
\DoxyCodeLine{00231\ \ \ \ \ Path(output\_file).parent.mkdir(parents=\textcolor{keyword}{True},\ exist\_ok=\textcolor{keyword}{True}) }
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keyword}{with}\ open(output\_file,\ \textcolor{stringliteral}{"{}w"{}})\ \textcolor{keyword}{as}\ f: }
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ json.dump(data,\ f,\ indent=2) }
\DoxyCodeLine{00234\  }

\end{DoxyCode}
\Hypertarget{namespacerl_1_1utils_1_1problem__filter_a8168d79ef8921b7e8232c95fed44fde8}\index{rl.utils.problem\_filter@{rl.utils.problem\_filter}!generate\_problems@{generate\_problems}}
\index{generate\_problems@{generate\_problems}!rl.utils.problem\_filter@{rl.utils.problem\_filter}}
\doxysubsubsection{\texorpdfstring{generate\_problems()}{generate\_problems()}}
{\footnotesize\ttfamily \label{namespacerl_1_1utils_1_1problem__filter_a8168d79ef8921b7e8232c95fed44fde8} 
rl.\+utils.\+problem\+\_\+filter.\+generate\+\_\+problems (\begin{DoxyParamCaption}\item[{}]{num\+\_\+problems}{ = {\ttfamily 20}, }\item[{}]{input\+\_\+folder}{ = {\ttfamily "{}problems"{}}, }\item[{}]{output\+\_\+folder}{ = {\ttfamily "{}problemset1"{}}, }\item[{}]{jig\+\_\+range}{ = {\ttfamily (5,~30)}, }\item[{}]{beluga\+\_\+range}{ = {\ttfamily (2,~8)}, }\item[{}]{prod\+\_\+line\+\_\+range}{ = {\ttfamily (2,~6)}, }\item[{}]{rack\+\_\+range}{ = {\ttfamily (2,~10)}}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00243\ ): }
\DoxyCodeLine{00244\ \ \ \ \ os.makedirs(output\_folder,\ exist\_ok=\textcolor{keyword}{True}) }
\DoxyCodeLine{00245\ \ \ \ \ problem\_files\ =\ [f\ \textcolor{keywordflow}{for}\ f\ \textcolor{keywordflow}{in}\ os.listdir(input\_folder)\ \textcolor{keywordflow}{if}\ f.endswith(\textcolor{stringliteral}{"{}.json"{}})] }
\DoxyCodeLine{00246\  }
\DoxyCodeLine{00247\ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(1,\ num\_problems\ +\ 1): }
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ random\_input\_file\ =\ random.choice(problem\_files) }
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ input\_path\ =\ os.path.join(input\_folder,\ random\_input\_file) }
\DoxyCodeLine{00250\  }
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Zufällige\ Werte\ generieren\ und\ zwischenspeichern }}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ max\_jigs\_val\ =\ random.randint(*jig\_range) }
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ max\_belugas\_val\ =\ random.randint(*beluga\_range) }
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ max\_prod\_lines\_val\ =\ random.randint(*prod\_line\_range) }
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ max\_racks\_val\ =\ random.randint(*rack\_range) }
\DoxyCodeLine{00256\  }
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Temporärer\ Dateiname }}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ temp\_filename\ =\ f\textcolor{stringliteral}{"{}problem\{i\}\_tmp.json"{}} }
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ temp\_path\ =\ os.path.join(output\_folder,\ temp\_filename) }
\DoxyCodeLine{00260\  }
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ filter\_problem( }
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ input\_file=input\_path, }
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ output\_file=temp\_path, }
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ max\_jigs=max\_jigs\_val, }
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ max\_belugas=max\_belugas\_val, }
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ max\_prod\_lines=max\_prod\_lines\_val, }
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ max\_racks=max\_racks\_val }
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ ) }
\DoxyCodeLine{00269\  }
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ JSON\ wieder\ einlesen }}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ open(temp\_path)\ \textcolor{keyword}{as}\ f: }
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ data\ =\ json.load(f) }
\DoxyCodeLine{00273\  }
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Infos\ extrahieren }}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ num\_jigs\ =\ len(data.get(\textcolor{stringliteral}{"{}jigs"{}},\ [])) }
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ num\_racks\ =\ len(data.get(\textcolor{stringliteral}{"{}racks"{}},\ [])) }
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ num\_belugas\ =\ len(data.get(\textcolor{stringliteral}{"{}flights"{}},\ [])) }
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ num\_prod\_lines\ =\ len(data.get(\textcolor{stringliteral}{"{}production\_lines"{}},\ [])) }
\DoxyCodeLine{00279\  }
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Neuer\ Dateiname }}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ new\_filename\ =\ f\textcolor{stringliteral}{"{}problem\{i\}\_j\{num\_jigs\}\_r\{num\_racks\}\_b\{num\_belugas\}\_pl\{num\_prod\_lines\}.json"{}} }
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ new\_path\ =\ os.path.join(output\_folder,\ new\_filename) }
\DoxyCodeLine{00283\  }
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Datei\ umbenennen }}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ os.rename(temp\_path,\ new\_path) }
\DoxyCodeLine{00286\  }

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\Hypertarget{namespacerl_1_1utils_1_1problem__filter_a95276af8fc881a54b9dbef49fc55515e}\index{rl.utils.problem\_filter@{rl.utils.problem\_filter}!JIG\_TYPES@{JIG\_TYPES}}
\index{JIG\_TYPES@{JIG\_TYPES}!rl.utils.problem\_filter@{rl.utils.problem\_filter}}
\doxysubsubsection{\texorpdfstring{JIG\_TYPES}{JIG\_TYPES}}
{\footnotesize\ttfamily \label{namespacerl_1_1utils_1_1problem__filter_a95276af8fc881a54b9dbef49fc55515e} 
dict rl.\+utils.\+problem\+\_\+filter.\+JIG\+\_\+\+TYPES}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ =\ \ \{}
\DoxyCodeLine{00002\ \ \ \ \ \textcolor{stringliteral}{"{}typeA"{}}:\ \{\textcolor{stringliteral}{"{}name"{}}:\ \textcolor{stringliteral}{"{}typeA"{}},\ \textcolor{stringliteral}{"{}size\_empty"{}}:\ 4,\ \textcolor{stringliteral}{"{}size\_loaded"{}}:\ 4\},}
\DoxyCodeLine{00003\ \ \ \ \ \textcolor{stringliteral}{"{}typeB"{}}:\ \{\textcolor{stringliteral}{"{}name"{}}:\ \textcolor{stringliteral}{"{}typeB"{}},\ \textcolor{stringliteral}{"{}size\_empty"{}}:\ 8,\ \textcolor{stringliteral}{"{}size\_loaded"{}}:\ 11\},}
\DoxyCodeLine{00004\ \ \ \ \ \textcolor{stringliteral}{"{}typeC"{}}:\ \{\textcolor{stringliteral}{"{}name"{}}:\ \textcolor{stringliteral}{"{}typeC"{}},\ \textcolor{stringliteral}{"{}size\_empty"{}}:\ 9,\ \textcolor{stringliteral}{"{}size\_loaded"{}}:\ 18\},}
\DoxyCodeLine{00005\ \ \ \ \ \textcolor{stringliteral}{"{}typeD"{}}:\ \{\textcolor{stringliteral}{"{}name"{}}:\ \textcolor{stringliteral}{"{}typeD"{}},\ \textcolor{stringliteral}{"{}size\_empty"{}}:\ 18,\ \textcolor{stringliteral}{"{}size\_loaded"{}}:\ 25\},}
\DoxyCodeLine{00006\ \ \ \ \ \textcolor{stringliteral}{"{}typeE"{}}:\ \{\textcolor{stringliteral}{"{}name"{}}:\ \textcolor{stringliteral}{"{}typeE"{}},\ \textcolor{stringliteral}{"{}size\_empty"{}}:\ 32,\ \textcolor{stringliteral}{"{}size\_loaded"{}}:\ 32\}}
\DoxyCodeLine{00007\ \}}

\end{DoxyCode}
