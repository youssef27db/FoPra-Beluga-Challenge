\doxysection{encode\+\_\+instances.\+py}
\hypertarget{encode__instances_8py_source}{}\label{encode__instances_8py_source}\index{toolkit/encode\_instances.py@{toolkit/encode\_instances.py}}
\mbox{\hyperlink{encode__instances_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00001}\mbox{\hyperlink{namespacetoolkit_1_1encode__instances}{00001}}\ \textcolor{comment}{\#!/usr/bin/env\ python}}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00003}00003\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00004}00004\ \textcolor{keyword}{import}\ argparse}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00005}00005\ }
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00006}00006\ \textcolor{keyword}{from}\ json2PDDL\ \textcolor{keyword}{import}\ main\ \textcolor{keyword}{as}\ run}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00007}00007\ \textcolor{keyword}{from}\ encoder.pddl\_encoding.variant\ \textcolor{keyword}{import}\ Variant}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00009}\mbox{\hyperlink{namespacetoolkit_1_1encode__instances_a05a6096d90c8243d250e6c4f3260d613}{00009}}\ parser\ =\ argparse.ArgumentParser(description=\textcolor{stringliteral}{"{}Encode\ json\ problem\ in\ PDDL"{}})}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00011}\mbox{\hyperlink{namespacetoolkit_1_1encode__instances_ad3646fb5b4d46bea7fb5900eca9c2805}{00011}}\ parser.add\_argument(\textcolor{stringliteral}{'-\/n'},\ dest=\textcolor{stringliteral}{"{}numeric"{}},\ help=\textcolor{stringliteral}{"{}numeric\ encoding"{}},\ action=\textcolor{stringliteral}{'store\_true'})}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00012}00012\ parser.add\_argument(\textcolor{stringliteral}{'-\/p'},\ dest=\textcolor{stringliteral}{"{}probabilistic"{}},\ help=\textcolor{stringliteral}{"{}probabilistic\ encoding"{}},\ action=\textcolor{stringliteral}{'store\_true'})}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00013}\mbox{\hyperlink{namespacetoolkit_1_1encode__instances_a9f430ee68187df0a692d377445d8d77c}{00013}}\ parser.add\_argument(\textcolor{stringliteral}{'-\/i'},\ help=\textcolor{stringliteral}{"{}inout\ folder\ of\ json\ problem\ definitions"{}},\ default=\textcolor{keywordtype}{None},\ required=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00014}00014\ parser.add\_argument(\textcolor{stringliteral}{'-\/o'},\ help=\textcolor{stringliteral}{"{}output\ folder\ to\ store\ the\ domain\ file\ and\ problem\ files"{}},\ default=\textcolor{keywordtype}{None},\ required=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00015}00015\ parser.add\_argument(\textcolor{stringliteral}{'-\/y'},\ dest=\textcolor{stringliteral}{"{}no\_questions"{}},\ help=\textcolor{stringliteral}{"{}just\ run"{}},\ action=\textcolor{stringliteral}{'store\_true'}\ ,\ required=\textcolor{keyword}{False})}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00017}\mbox{\hyperlink{namespacetoolkit_1_1encode__instances_a985deca032396114fa3e5609a116907a}{00017}}\ args\ =\ parser.parse\_args()}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00019}\mbox{\hyperlink{namespacetoolkit_1_1encode__instances_ad71958692e0b5cac9b977041451eb924}{00019}}\ variant\ =\ \mbox{\hyperlink{classtoolkit_1_1encoder_1_1pddl__encoding_1_1variant_1_1_variant}{Variant}}()}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00020}\mbox{\hyperlink{namespacetoolkit_1_1encode__instances_a9b24bf1672f435a478cb056d63d1f058}{00020}}\ variant.classic\ =\ \textcolor{keywordflow}{not}\ args.numeric}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00021}\mbox{\hyperlink{namespacetoolkit_1_1encode__instances_a79f5d7f9441133e3efa6d16e28f4e660}{00021}}\ variant.probabilistic\ =\ args.probabilistic}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00022}\mbox{\hyperlink{namespacetoolkit_1_1encode__instances_a5732865fde7c8b25b6e23732b6a486dd}{00022}}\ input\_folder\ =\ args.i}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00023}00023\ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ os.path.isdir(input\_folder):}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00024}00024\ \ \ \ \ print(f\textcolor{stringliteral}{"{}Input\ folder\ \{input\_folder\}\ does\ not\ exists\ or\ is\ not\ a\ folder."{}})}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00025}00025\ \ \ \ \ exit(1)}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00026}\mbox{\hyperlink{namespacetoolkit_1_1encode__instances_adbac64c8e7e7619a5aac03a9f8c7f09f}{00026}}\ out\_folder\ =\ args.o}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00027}00027\ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ os.path.isdir(out\_folder):}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00028}00028\ \ \ \ \ print(f\textcolor{stringliteral}{"{}Output\ folder\ \{out\_folder\}\ does\ not\ exists\ or\ is\ not\ a\ folder."{}})}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00029}00029\ \ \ \ \ exit(1)}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00032}\mbox{\hyperlink{namespacetoolkit_1_1encode__instances_a2819356ef4c4a12b01959c2dd94729cd}{00032}}\ final\_num\_instances\ =\ len(os.listdir(input\_folder))}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00034}00034\ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ args.no\_questions:}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00035}00035\ \ \ \ \ print(\textcolor{stringliteral}{"{}Do\ you\ want\ to\ encode\ "{}}\ +\ str(final\_num\_instances)\ +\ \textcolor{stringliteral}{"{}\ instances?\ y/n"{}})}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00036}\mbox{\hyperlink{namespacetoolkit_1_1encode__instances_a415a514ebea8d79c4b93dde30c63402f}{00036}}\ \ \ \ \ answer\ =\ input()}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00038}00038\ \ \ \ \ \textcolor{keywordflow}{if}\ answer\ !=\ \textcolor{stringliteral}{"{}y"{}}:}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00039}00039\ \ \ \ \ \ \ \ \ exit()}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00040}00040\ }
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00041}\mbox{\hyperlink{namespacetoolkit_1_1encode__instances_aece3e26b88b8c8e566b47d6bbc8ba45a}{00041}}\ num\_instances\ =\ 0}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00043}00043\ os.system(\textcolor{stringliteral}{"{}rm\ -\/f\ "{}}\ +\ out\_folder\ +\ \textcolor{stringliteral}{"{}/*"{}})}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00045}00045\ \textcolor{keywordflow}{for}\ problem\ \textcolor{keywordflow}{in}\ os.listdir(input\_folder):}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00046}00046\ \ \ \ \ \textcolor{keywordflow}{if}\ num\_instances\ \%\ 10\ ==\ 0\ \textcolor{keywordflow}{and}\ num\_instances\ >\ 0:}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00047}00047\ \ \ \ \ \ \ \ \ print(str(num\_instances)\ +\ \textcolor{stringliteral}{"{}/"{}}\ +\ str(final\_num\_instances))}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00048}00048\ \ \ \ \ run(os.path.join(input\_folder,\ problem),\ variant,\ out\_folder)}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00049}00049\ \ \ \ \ num\_instances\ +=\ 1}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00051}00051\ print(\textcolor{stringliteral}{"{}Number\ of\ encoded\ instances:\ "{}}\ +\ str(num\_instances))}
\DoxyCodeLine{\Hypertarget{encode__instances_8py_source_l00052}00052\ }

\end{DoxyCode}
